function initTOC(){Global.utils.navItems=document.querySelectorAll(".post-toc-wrap .post-toc li"),Global.utils.navItems.length>0?(Global.utils={...Global.utils,updateActiveTOCLink(){if(!Array.isArray(Global.utils.sections))return;let t=Global.utils.sections.findIndex(t=>t&&t.getBoundingClientRect().top-200>0);-1===t?t=Global.utils.sections.length-1:t>0&&t--,this.activateTOCLink(t)},registerTOCScroll(){Global.utils.sections=[...document.querySelectorAll(".post-toc li a.nav-link")].map(t=>{const e=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.addEventListener("click",t=>{t.preventDefault();const o=e.getBoundingClientRect().top+window.scrollY;window.anime({targets:document.scrollingElement,duration:500,easing:"linear",scrollTop:o-10,complete:function(){setTimeout(()=>{Global.utils.pageTop_dom.classList.add("hide")},100)}})}),e})},activateTOCLink(t){const e=document.querySelectorAll(".post-toc li a.nav-link")[t];if(!e||e.classList.contains("active-current"))return;document.querySelectorAll(".post-toc .active").forEach(t=>{t.classList.remove("active","active-current")}),e.classList.add("active","active-current");const o=document.querySelector(".toc-content-container"),l=o.getBoundingClientRect().top,i=o.offsetHeight>window.innerHeight?(o.offsetHeight-window.innerHeight)/2:0,n=e.getBoundingClientRect().top-l-Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2+e.offsetHeight/2-i,c=o.scrollTop+n;window.anime({targets:o,duration:300,easing:"easeOutQuad",scrollTop:c})},showTOCAside(){const t=()=>{const t=Global.getStyleStatus(),e="isOpenPageAside";t&&t.hasOwnProperty(e)?Global.utils.TocToggle.pageAsideHandleOfTOC(t[e]):Global.utils.TocToggle.pageAsideHandleOfTOC(!0)};Global.theme_config.articles.toc.hasOwnProperty("init_open")?Global.theme_config.articles.toc.init_open?t():Global.utils.TocToggle.pageAsideHandleOfTOC(!1):t()}},Global.utils.showTOCAside(),Global.utils.registerTOCScroll()):document.querySelectorAll(".toc-content-container, .toc-marker").forEach(t=>{t.remove()})}!0===Global.theme_config.global.pjax&&Global.utils?initTOC():window.addEventListener("DOMContentLoaded",initTOC);